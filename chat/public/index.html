<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Clever Education</title>
  <link id="favicon" rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="stylesheet" href="style.css">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4357116898226906"
    crossorigin="anonymous"></script>
</head>
<body>

  <!-- ================== LOGIN SCREEN ================== -->
  <div id="loginPage" class="login-container">
    <div class="login-layout">
      
      <!-- ===== Center Section ===== -->
      <div class="login-center">
        <div class="login-content">
          <img src="/images/55khatl.png" alt="Logo" class="logo">
          <h2>Welcome to Clever Education</h2>

          <input type="text" id="usernameInput" placeholder="Enter username..." required>
          <input type="password" id="passwordInput" placeholder="Enter password..." required>
          <input type="number" id="serverPortInput" placeholder="Enter room code (1–60000)..." min="1" max="65535" required>

          <button onclick="setUsername()">Join Chat</button>

          <div class="disclaimer">
            Property of Oliver Lopez 2025.
          </div>
        </div>
      </div>

      <!-- ===== Right Section ===== -->
      <div class="login-side">
        <div class="side-card">
          <h3>Updates & Info</h3>
          <p>- Public Room: 1</p>
          <p>- Info is deleted on update</p>
          <p>- Please be respectful towards others in the chatrooms</p>
          <p>- Version 0.5.1</p>
        </div>

        <div class="side-card">
          <h3>Profile Customization</h3>
          <p>Select a profile picture:</p>
          <input type="file" id="profilePicInput" accept="image/*">

          <!-- ⭐ Added: Missing profile image preview -->
          <img id="previewPic" class="profile-preview" src="" alt="Profile Preview">

          <p>Choose your username color:</p>
          <div id="colorSliders">
            <label>R: <input type="range" id="rSlider" min="0" max="255" value="0"></label>
            <label>G: <input type="range" id="gSlider" min="0" max="255" value="255"></label>
            <label>B: <input type="range" id="bSlider" min="0" max="170" value="170"></label>

            <div id="colorPreview"></div>

            <!-- ⭐ Added: Missing username color preview -->
            <div id="usernamePreview">Username</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ================== CHAT SCREEN ================== -->
  <div id="chatPage" class="chat-container hidden">
    <div class="users-panel">
      <h3>Online: <span id="userCount">0</span></h3>
      <div id="usersList"></div>
    </div>

    <div class="chat-main">
      <div id="chatBox" class="chat-box"></div>

      <div class="chat-input">
        <input type="text" id="chatInput" placeholder="Type a message...">
        <input type="file" id="imageInput" accept="image/*" class="hidden" onchange="sendImage(event)">
        <button title="Attach file" onclick="document.getElementById('imageInput').click()">Image</button>
        <button onclick="sendMessage()">Send</button>
      </div>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="script.js"></script>

  <script>
    // Live color + profile preview
    const r = document.getElementById('rSlider');
    const g = document.getElementById('gSlider');
    const b = document.getElementById('bSlider');
    const colorPreview = document.getElementById('colorPreview');
    const usernamePreview = document.getElementById('usernamePreview'); // added preview element
    const profilePicInput = document.getElementById('profilePicInput');
    const previewPic = document.getElementById('previewPic'); // added preview element

    function updateColor() {
      const color = `rgb(${r.value}, ${g.value}, ${b.value})`;
      colorPreview.style.background = color;
      usernamePreview.style.color = color;
    }

    [r, g, b].forEach(slider => slider.addEventListener('input', updateColor));
    updateColor();

    profilePicInput.addEventListener('change', e => {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = e => { previewPic.src = e.target.result; };
        reader.readAsDataURL(file);
      }
    });
  </script>

</body>
</html>

